<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test E-Commerce - Product Catalog</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f5f5; }
        
        header { background: #fff; padding: 1rem 2rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .header-content { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: bold; color: #d62828; }
        .cart-icon { position: relative; cursor: pointer; }
        .cart-count { position: absolute; top: -8px; right: -8px; background: #d62828; color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 12px; }
        
        nav { background: #fff; padding: 1rem 2rem; border-bottom: 1px solid #eee; }
        nav ul { list-style: none; display: flex; gap: 2rem; max-width: 1200px; margin: 0 auto; }
        nav a { text-decoration: none; color: #333; font-weight: 500; }
        nav a:hover { color: #d62828; }
        
        .container { max-width: 1200px; margin: 2rem auto; padding: 0 2rem; }
        h1 { margin-bottom: 2rem; color: #333; }
        
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 2rem; }
        
        .product-card { background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.2s; }
        .product-card:hover { transform: translateY(-4px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        
        .product-image { width: 100%; height: 200px; object-fit: cover; background: #ddd; }
        .product-info { padding: 1.5rem; }
        .product-name { font-size: 1.2rem; font-weight: 600; color: #333; margin-bottom: 0.5rem; }
        .product-description { color: #666; font-size: 0.9rem; margin-bottom: 1rem; line-height: 1.4; }
        .product-price { font-size: 1.5rem; color: #d62828; font-weight: bold; margin-bottom: 1rem; }
        .product-calories { color: #888; font-size: 0.85rem; margin-bottom: 1rem; }
        
        .btn-add-to-cart { width: 100%; padding: 0.75rem; background: #d62828; color: white; border: none; border-radius: 4px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: background 0.2s; }
        .btn-add-to-cart:hover { background: #b91d1d; }
        
        .cart-sidebar { position: fixed; right: -400px; top: 0; width: 400px; height: 100%; background: white; box-shadow: -2px 0 8px rgba(0,0,0,0.2); transition: right 0.3s; z-index: 1000; overflow-y: auto; }
        .cart-sidebar.open { right: 0; }
        
        .cart-header { padding: 1.5rem; background: #d62828; color: white; display: flex; justify-content: space-between; align-items: center; }
        .cart-close { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }
        
        .cart-items { padding: 1rem; }
        .cart-item { border-bottom: 1px solid #eee; padding: 1rem 0; }
        .cart-item-header { display: flex; justify-content: space-between; margin-bottom: 0.5rem; }
        .cart-item-name { font-weight: 600; }
        .cart-item-price { color: #d62828; font-weight: bold; }
        .cart-item-quantity { display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem; }
        .qty-btn { background: #f0f0f0; border: none; width: 30px; height: 30px; border-radius: 4px; cursor: pointer; }
        .qty-btn:hover { background: #e0e0e0; }
        .remove-item { color: #d62828; background: none; border: none; cursor: pointer; text-decoration: underline; font-size: 0.9rem; margin-top: 0.5rem; }
        
        .cart-summary { padding: 1.5rem; border-top: 2px solid #eee; }
        .cart-total { display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: bold; margin-bottom: 1rem; }
        .btn-checkout { width: 100%; padding: 1rem; background: #28a745; color: white; border: none; border-radius: 4px; font-size: 1.1rem; font-weight: 600; cursor: pointer; }
        .btn-checkout:hover { background: #218838; }
        
        .cart-empty { padding: 2rem; text-align: center; color: #888; }
        
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; z-index: 999; }
        .overlay.active { display: block; }
        
        /* Tracking indicator */
        .ph-track-pricing-view { display: none; }
    </style>
</head>
<body>
    <!-- Page view tracking element -->
    <div class="ph-track-pricing-view"></div>
    
    <header>
        <div class="header-content">
            <div class="logo">üç¥ Test Restaurant</div>
            <div class="cart-icon" onclick="toggleCart()">
                üõí Cart
                <span class="cart-count" id="cart-count">0</span>
            </div>
        </div>
    </header>
    
    <nav>
        <ul>
            <li><a href="index.html">Menu</a></li>
            <li><a href="appetizers.html">Appetizers</a></li>
            <li><a href="entrees.html">Entr√©es</a></li>
            <li><a href="family-bundles.html">Family Bundles</a></li>
        </ul>
    </nav>
    
    <div class="container">
        <h1>Featured Menu Items</h1>
        
        <div class="product-grid">
            <!-- Product 1 -->
            <div class="product-card" data-product-id="lasagna-classico">
                <div class="product-image" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);"></div>
                <div class="product-info">
                    <h3 class="product-name" data-product-name="Lasagna Classico">Lasagna Classico</h3>
                    <p class="product-description">Layers of pasta, meat sauce and mozzarella</p>
                    <div class="product-price" data-price="17.99" data-currency="USD">$17.99</div>
                    <div class="product-calories">920 cal</div>
                    <button class="btn-add-to-cart" onclick="addToCart(this)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Product 2 -->
            <div class="product-card" data-product-id="chicken-alfredo">
                <div class="product-image" style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);"></div>
                <div class="product-info">
                    <h3 class="product-name" data-product-name="Chicken Alfredo">Chicken Alfredo</h3>
                    <p class="product-description">Fettuccine with creamy alfredo sauce and grilled chicken</p>
                    <div class="product-price" data-price="19.99" data-currency="USD">$19.99</div>
                    <div class="product-calories">1,120 cal</div>
                    <button class="btn-add-to-cart" onclick="addToCart(this)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Product 3 -->
            <div class="product-card" data-product-id="shrimp-scampi">
                <div class="product-image" style="background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);"></div>
                <div class="product-info">
                    <h3 class="product-name" data-product-name="Shrimp Scampi">Shrimp Scampi</h3>
                    <p class="product-description">Shrimp saut√©ed in garlic sauce over angel hair</p>
                    <div class="product-price" data-price="21.99" data-currency="USD">$21.99</div>
                    <div class="product-calories">510 cal</div>
                    <button class="btn-add-to-cart" onclick="addToCart(this)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Product 4 -->
            <div class="product-card" data-product-id="tour-of-italy">
                <div class="product-image" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);"></div>
                <div class="product-info">
                    <h3 class="product-name" data-product-name="Tour of Italy">Tour of Italy</h3>
                    <p class="product-description">Chicken Parmigiana, Lasagna Classico & Fettuccine Alfredo</p>
                    <div class="product-price" data-price="24.99" data-currency="USD">$24.99</div>
                    <div class="product-calories">1,520 cal</div>
                    <button class="btn-add-to-cart" onclick="addToCart(this)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Product 5 -->
            <div class="product-card" data-product-id="chicken-parmigiana">
                <div class="product-image" style="background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);"></div>
                <div class="product-info">
                    <h3 class="product-name" data-product-name="Chicken Parmigiana">Chicken Parmigiana</h3>
                    <p class="product-description">Breaded chicken breast topped with marinara and mozzarella</p>
                    <div class="product-price" data-price="18.99" data-currency="USD">$18.99</div>
                    <div class="product-calories">1,090 cal</div>
                    <button class="btn-add-to-cart" onclick="addToCart(this)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Product 6 -->
            <div class="product-card" data-product-id="spaghetti-meatballs">
                <div class="product-image" style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);"></div>
                <div class="product-info">
                    <h3 class="product-name" data-product-name="Spaghetti & Meatballs">Spaghetti & Meatballs</h3>
                    <p class="product-description">Traditional meat sauce with meatballs</p>
                    <div class="product-price" data-price="16.99" data-currency="USD">$16.99</div>
                    <div class="product-calories">1,110 cal</div>
                    <button class="btn-add-to-cart" onclick="addToCart(this)">Add to Cart</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Cart Sidebar -->
    <div class="overlay" id="cart-overlay" onclick="toggleCart()"></div>
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h2>Your Cart</h2>
            <button class="cart-close" onclick="toggleCart()">√ó</button>
        </div>
        <div class="cart-items" id="cart-items">
            <div class="cart-empty">Your cart is empty</div>
        </div>
        <div class="cart-summary" id="cart-summary" style="display: none;">
            <div class="cart-total">
                <span>Subtotal:</span>
                <span id="cart-subtotal">$0.00</span>
            </div>
            <div class="cart-total" style="font-size: 1rem; font-weight: normal;">
                <span>Tax:</span>
                <span id="cart-tax">$0.00</span>
            </div>
            <div class="cart-total" style="border-top: 1px solid #ddd; padding-top: 0.5rem; margin-top: 0.5rem;">
                <span>Total:</span>
                <span id="cart-total">$0.00</span>
            </div>
            <button class="btn-checkout" onclick="goToCheckout()">Proceed to Checkout</button>
        </div>
    </div>
    
    <!-- Analytics Scripts -->
    <script>
        // Set client ID for analytics
        window.AskMeAnalyticsClientId = 'test-ecommerce';
    </script>
    <script src="/lib/clientAnalytics/ask-me-analytics.min.js"></script>
    <script src="/lib/clientAnalytics/askme-analytics-init-v2.js"></script>
    
    <!-- Cart Management -->
    <script>
        let cart = JSON.parse(localStorage.getItem('test-cart')) || [];
        
        function updateCartDisplay() {
            const cartCount = document.getElementById('cart-count');
            const cartItems = document.getElementById('cart-items');
            const cartSummary = document.getElementById('cart-summary');
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="cart-empty">Your cart is empty</div>';
                cartSummary.style.display = 'none';
                return;
            }
            
            cartSummary.style.display = 'block';
            
            let subtotal = 0;
            cartItems.innerHTML = cart.map((item, index) => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                return `
                    <div class="cart-item" data-cart-item="${item.id}">
                        <div class="cart-item-header">
                            <span class="cart-item-name">${item.name}</span>
                            <span class="cart-item-price">$${itemTotal.toFixed(2)}</span>
                        </div>
                        <div class="cart-item-quantity">
                            <button class="qty-btn" onclick="updateQuantity(${index}, -1)">-</button>
                            <span>${item.quantity}</span>
                            <button class="qty-btn" onclick="updateQuantity(${index}, 1)">+</button>
                        </div>
                        <button class="remove-item" onclick="removeFromCart(${index})">Remove</button>
                    </div>
                `;
            }).join('');
            
            const tax = subtotal * 0.08; // 8% tax
            const total = subtotal + tax;
            
            document.getElementById('cart-subtotal').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('cart-tax').textContent = `$${tax.toFixed(2)}`;
            document.getElementById('cart-total').textContent = `$${total.toFixed(2)}`;
        }
        
        function addToCart(button) {
            const card = button.closest('.product-card');
            const productId = card.dataset.productId;
            const name = card.querySelector('.product-name').dataset.productName;
            const priceEl = card.querySelector('.product-price');
            const price = parseFloat(priceEl.dataset.price);
            const currency = priceEl.dataset.currency;
            
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({
                    id: productId,
                    name: name,
                    price: price,
                    currency: currency,
                    quantity: 1
                });
            }
            
            localStorage.setItem('test-cart', JSON.stringify(cart));
            updateCartDisplay();
            
            // Show cart briefly
            toggleCart();
            
            console.log('üõí Product added to cart:', { productId, name, price, currency });
        }
        
        function updateQuantity(index, change) {
            cart[index].quantity += change;
            
            if (cart[index].quantity <= 0) {
                removeFromCart(index);
                return;
            }
            
            localStorage.setItem('test-cart', JSON.stringify(cart));
            updateCartDisplay();
        }
        
        function removeFromCart(index) {
            const removedItem = cart[index];
            cart.splice(index, 1);
            localStorage.setItem('test-cart', JSON.stringify(cart));
            updateCartDisplay();
            
            console.log('üóëÔ∏è Product removed from cart:', removedItem);
        }
        
        function toggleCart() {
            const sidebar = document.getElementById('cart-sidebar');
            const overlay = document.getElementById('cart-overlay');
            
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        }
        
        function goToCheckout() {
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }
            window.location.href = 'checkout.html';
        }
        
        // Initialize cart display
        updateCartDisplay();
    </script>
</body>
</html>
