<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSS Class Convention Tester - AskMe Analytics</title>
  
  <!-- Analytics Setup -->
  <script>
    window.AskMeAnalyticsConfig = {
      clientId: 'test-css-classes',
      debug: true,
      analyticsLibraryPath: './ask-me-analytics.min.js'
    };
  </script>
  <script src="./askme-analytics-init.js"></script>
  
  <style>
    * { box-sizing: border-box; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    h1 {
      color: #333;
      margin-bottom: 10px;
    }
    
    .intro {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
      border-left: 4px solid #007bff;
    }
    
    .test-section {
      background: white;
      padding: 30px;
      border-radius: 8px;
      margin-bottom: 30px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .test-section h2 {
      color: #333;
      margin-top: 0;
      padding-bottom: 10px;
      border-bottom: 2px solid #eee;
    }
    
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      margin: 5px;
      transition: all 0.2s;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    
    .btn-primary {
      background: #007bff;
      color: white;
    }
    
    .btn-success {
      background: #28a745;
      color: white;
    }
    
    .btn-danger {
      background: #dc3545;
      color: white;
    }
    
    .btn-secondary {
      background: #6c757d;
      color: white;
    }
    
    .pricing-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .pricing-card {
      border: 2px solid #ddd;
      border-radius: 8px;
      padding: 30px 20px;
      text-align: center;
      transition: all 0.2s;
    }
    
    .pricing-card:hover {
      border-color: #007bff;
      transform: translateY(-4px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    }
    
    .pricing-card h3 {
      margin: 0 0 10px 0;
      color: #333;
    }
    
    .price {
      font-size: 32px;
      font-weight: bold;
      color: #007bff;
      margin: 20px 0;
    }
    
    .features {
      list-style: none;
      padding: 0;
      margin: 20px 0;
      text-align: left;
    }
    
    .features li {
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }
    
    .features li:before {
      content: "‚úì ";
      color: #28a745;
      font-weight: bold;
    }
    
    form {
      max-width: 400px;
      margin: 20px 0;
    }
    
    input, textarea {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }
    
    input:focus, textarea:focus {
      outline: none;
      border-color: #007bff;
    }
    
    .success-message {
      background: #d4edda;
      color: #155724;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #c3e6cb;
      margin: 20px 0;
    }
    
    .info-box {
      background: #d1ecf1;
      color: #0c5460;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
      border-left: 4px solid #17a2b8;
    }
    
    .code-block {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 4px;
      border: 1px solid #ddd;
      overflow-x: auto;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
      font-size: 13px;
    }
    
    .highlight-tracked [class*="ph-track-"] {
      outline: 3px dashed #ff6b35 !important;
      outline-offset: 2px;
      position: relative;
    }
    
    .highlight-tracked [class*="ph-track-"]::before {
      content: "üéØ";
      position: absolute;
      top: -8px;
      right: -8px;
      background: #ff6b35;
      color: white;
      font-size: 16px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    .console-output {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 20px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      max-height: 300px;
      overflow-y: auto;
      margin: 20px 0;
    }
    
    .console-output .event {
      margin: 8px 0;
      padding: 8px;
      background: #2d2d2d;
      border-radius: 4px;
      border-left: 3px solid #4ec9b0;
    }
    
    .console-output .event-name {
      color: #4ec9b0;
      font-weight: bold;
    }
    
    .console-output .event-prop {
      color: #9cdcfe;
      margin-left: 20px;
    }
    
    .toggle-highlight {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      padding: 12px 20px;
      background: #ff6b35;
      color: white;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: all 0.2s;
    }
    
    .toggle-highlight:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }
    
    .stats {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      text-align: center;
    }
    
    .stats h3 {
      margin: 0 0 10px 0;
    }
    
    .stats .number {
      font-size: 48px;
      font-weight: bold;
    }
    
    #page-1 { display: block; }
    #page-2, #page-3, #page-4 { display: none; }
    
    .nav-buttons {
      margin: 30px 0;
      text-align: center;
    }
  </style>
</head>
<body>

<button class="toggle-highlight" onclick="toggleHighlight()">
  üéØ Toggle Tracking Highlights
</button>

<div class="container">
  
  <div class="intro">
    <h1>üéØ CSS Class Convention Tester</h1>
    <p><strong>This page demonstrates the ph-track-* CSS class convention for automatic event tracking.</strong></p>
    <p>Open the browser console (F12) to see events being captured in real-time!</p>
    <div class="info-box">
      üí° <strong>Tip:</strong> Click the "üéØ Toggle Tracking Highlights" button in the top-right to see which elements are being tracked.
    </div>
  </div>
  
  <!-- Stats Box -->
  <div class="stats">
    <h3>Tracked Elements on This Page</h3>
    <div class="number" id="tracked-count">0</div>
  </div>
  
  <!-- Page 1: Authentication -->
  <div id="page-1" class="test-section">
    <h2>üîê Authentication Flow</h2>
    
    <h3>Login Form</h3>
    <form onsubmit="simulateLogin(event)">
      <input type="email" placeholder="Email" required>
      <input type="password" placeholder="Password" required>
      <button type="submit" class="btn btn-primary ph-track-auth-login">
        Sign In
      </button>
      <a href="#" class="btn btn-secondary ph-track-auth-forgot-password" 
         onclick="alert('Password reset would be triggered'); return false;">
        Forgot Password?
      </a>
    </form>
    
    <h3>Sign Up Form</h3>
    <form onsubmit="simulateSignup(event)">
      <input type="text" placeholder="Full Name" required>
      <input type="email" placeholder="Email" required>
      <input type="password" placeholder="Password" required>
      <button type="submit" class="btn btn-success ph-track-auth-signup">
        Create Account
      </button>
    </form>
    
    <div class="code-block">
      &lt;button class="btn btn-primary <strong>ph-track-auth-login</strong>"&gt;<br>
      &nbsp;&nbsp;Sign In<br>
      &lt;/button&gt;
    </div>
    
    <div class="nav-buttons">
      <button class="btn btn-primary" onclick="showPage('page-2')">
        Next: Pricing Page ‚Üí
      </button>
    </div>
  </div>
  
  <!-- Page 2: Pricing -->
  <div id="page-2" class="test-section ph-track-pricing-view">
    <h2>üí∞ Pricing Page</h2>
    
    <p>This page automatically fires <strong>PRICING_PAGE_VIEWED</strong> event on load.</p>
    
    <div class="pricing-cards">
      
      <div class="pricing-card" 
           data-product="Basic Plan"
           data-price="9.99"
           data-currency="USD">
        <h3>Basic</h3>
        <div class="price">$9.99<span style="font-size:16px">/mo</span></div>
        <ul class="features">
          <li>Up to 10 projects</li>
          <li>Basic analytics</li>
          <li>Email support</li>
        </ul>
        <button class="btn btn-primary ph-track-product-select-basic"
                onclick="selectPlan('Basic Plan', 9.99)">
          Choose Basic
        </button>
      </div>
      
      <div class="pricing-card" 
           data-product="Premium Plan"
           data-price="29.99"
           data-currency="USD"
           style="border-color: #007bff; border-width: 3px;">
        <h3>Premium ‚≠ê</h3>
        <div class="price">$29.99<span style="font-size:16px">/mo</span></div>
        <ul class="features">
          <li>Unlimited projects</li>
          <li>Advanced analytics</li>
          <li>Priority support</li>
          <li>Custom integrations</li>
        </ul>
        <button class="btn btn-success ph-track-product-select-premium"
                onclick="selectPlan('Premium Plan', 29.99)">
          Choose Premium
        </button>
      </div>
      
      <div class="pricing-card" 
           data-product="Enterprise Plan"
           data-price="99.99"
           data-currency="USD">
        <h3>Enterprise</h3>
        <div class="price">$99.99<span style="font-size:16px">/mo</span></div>
        <ul class="features">
          <li>Everything in Premium</li>
          <li>Dedicated account manager</li>
          <li>SLA guarantee</li>
          <li>Custom contracts</li>
        </ul>
        <button class="btn btn-danger ph-track-product-select-enterprise"
                onclick="selectPlan('Enterprise Plan', 99.99)">
          Contact Sales
        </button>
      </div>
      
    </div>
    
    <div class="code-block">
      &lt;div class="<strong>ph-track-pricing-view</strong>"&gt;<br>
      &nbsp;&nbsp;&lt;button class="<strong>ph-track-product-select-premium</strong>"<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data-product="Premium Plan"<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data-price="29.99"&gt;<br>
      &nbsp;&nbsp;&nbsp;&nbsp;Choose Premium<br>
      &nbsp;&nbsp;&lt;/button&gt;<br>
      &lt;/div&gt;
    </div>
    
    <div class="nav-buttons">
      <button class="btn btn-secondary" onclick="showPage('page-1')">
        ‚Üê Back
      </button>
    </div>
  </div>
  
  <!-- Page 3: Checkout -->
  <div id="page-3" class="test-section ph-track-checkout-start">
    <h2>üõí Checkout Page</h2>
    
    <p>Selected Plan: <strong id="selected-plan">Premium Plan</strong></p>
    <p>Total: <strong id="selected-price">$29.99</strong></p>
    
    <form onsubmit="completeCheckout(event)">
      <h3>Billing Information</h3>
      <input type="text" placeholder="Full Name" required>
      <input type="email" placeholder="Email" required>
      <input type="text" placeholder="Card Number" required>
      <input type="text" placeholder="Expiry (MM/YY)" required>
      <input type="text" placeholder="CVV" required>
      
      <button type="submit" class="btn btn-success ph-track-checkout-submit">
        Complete Purchase
      </button>
    </form>
    
    <div class="code-block">
      &lt;div class="<strong>ph-track-checkout-start</strong>"&gt;<br>
      &nbsp;&nbsp;&lt;button class="<strong>ph-track-checkout-submit</strong>"&gt;<br>
      &nbsp;&nbsp;&nbsp;&nbsp;Complete Purchase<br>
      &nbsp;&nbsp;&lt;/button&gt;<br>
      &lt;/div&gt;
    </div>
    
    <div class="nav-buttons">
      <button class="btn btn-secondary" onclick="showPage('page-2')">
        ‚Üê Back to Pricing
      </button>
    </div>
  </div>
  
  <!-- Page 4: Confirmation -->
  <div id="page-4" class="test-section">
    <div class="success-message ph-track-checkout-complete"
         id="confirmation-box">
      <h1 style="margin-top:0">‚úÖ Order Complete!</h1>
      <p><strong>Order #<span id="order-id">12345</span></strong></p>
      <p>Product: <span id="order-product">Premium Plan</span></p>
      <p>Total: $<span id="order-total">29.99</span></p>
      <p>A confirmation email has been sent to your inbox.</p>
    </div>
    
    <div class="info-box">
      üéâ <strong>CHECKOUT_COMPLETED</strong> event was automatically fired with revenue data!
    </div>
    
    <div class="code-block">
      &lt;div class="<strong>ph-track-checkout-complete</strong>"<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data-revenue="29.99"<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data-product-name="Premium Plan"<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data-currency="USD"<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data-order-id="12345"&gt;<br>
      &nbsp;&nbsp;Order Complete!<br>
      &lt;/div&gt;
    </div>
    
    <div class="nav-buttons">
      <button class="btn btn-success" onclick="location.reload()">
        üîÑ Start Over
      </button>
    </div>
  </div>
  
  <!-- Console Output Simulation -->
  <div class="test-section">
    <h2>üìä Recent Events (Console Output)</h2>
    <div class="console-output" id="console-output">
      <div class="event">
        <div class="event-name">‚ÑπÔ∏è [ph-injector] PostHog initialized</div>
      </div>
    </div>
    <button class="btn btn-secondary" onclick="clearConsole()">
      Clear Console
    </button>
  </div>
  
  <!-- Testing Guide -->
  <div class="test-section">
    <h2>üß™ Testing Checklist</h2>
    
    <h3>1. Check PostHog Loaded</h3>
    <div class="code-block">
      console.log(window.posthog);  // Should be defined
    </div>
    
    <h3>2. Find All Tracked Elements</h3>
    <div class="code-block">
      document.querySelectorAll('[class*="ph-track-"]').forEach(el => {<br>
      &nbsp;&nbsp;console.log('‚úÖ', el.className);<br>
      });
    </div>
    
    <h3>3. Test With UTM Parameters</h3>
    <div class="code-block">
      ?utm_source=facebook&utm_medium=cpc&utm_campaign=test
    </div>
    <p>Revenue will be attributed to the channel!</p>
    
    <h3>4. Verify in PostHog Dashboard</h3>
    <p>Go to PostHog ‚Üí Live Events to see events in real-time.</p>
  </div>
  
</div>

<script>
  let selectedPlanName = 'Premium Plan';
  let selectedPlanPrice = 29.99;
  
  // Count tracked elements
  function updateTrackedCount() {
    const count = document.querySelectorAll('[class*="ph-track-"]').length;
    document.getElementById('tracked-count').textContent = count;
  }
  
  // Toggle highlight mode
  let highlightMode = false;
  function toggleHighlight() {
    highlightMode = !highlightMode;
    if (highlightMode) {
      document.body.classList.add('highlight-tracked');
    } else {
      document.body.classList.remove('highlight-tracked');
    }
  }
  
  // Show page
  function showPage(pageId) {
    document.querySelectorAll('[id^="page-"]').forEach(p => p.style.display = 'none');
    document.getElementById(pageId).style.display = 'block';
    
    // Log page view
    logEvent('PAGE_VIEW', { page: pageId });
  }
  
  // Simulate login
  function simulateLogin(e) {
    e.preventDefault();
    logEvent('LOGIN_ATTEMPTED', { method: 'email' });
    alert('Login would happen here. In real app, this would redirect to dashboard with ph-track-auth-login-complete class.');
  }
  
  // Simulate signup
  function simulateSignup(e) {
    e.preventDefault();
    logEvent('SIGNUP_STARTED', { method: 'email' });
    alert('Signup would happen here. Success page would have ph-track-auth-signup-complete class.');
  }
  
  // Select plan
  function selectPlan(plan, price) {
    selectedPlanName = plan;
    selectedPlanPrice = price;
    document.getElementById('selected-plan').textContent = plan;
    document.getElementById('selected-price').textContent = '$' + price.toFixed(2);
    showPage('page-3');
    logEvent('PRODUCT_SELECTED', { product: plan, price: price, currency: 'USD' });
  }
  
  // Complete checkout
  function completeCheckout(e) {
    e.preventDefault();
    
    const orderId = Math.floor(Math.random() * 100000);
    document.getElementById('order-id').textContent = orderId;
    document.getElementById('order-product').textContent = selectedPlanName;
    document.getElementById('order-total').textContent = selectedPlanPrice.toFixed(2);
    
    // Set data attributes for revenue tracking
    const confirmBox = document.getElementById('confirmation-box');
    confirmBox.setAttribute('data-revenue', selectedPlanPrice.toFixed(2));
    confirmBox.setAttribute('data-product-name', selectedPlanName);
    confirmBox.setAttribute('data-currency', 'USD');
    confirmBox.setAttribute('data-order-id', orderId);
    
    showPage('page-4');
    
    logEvent('CHECKOUT_COMPLETED', {
      revenue: selectedPlanPrice.toFixed(2),
      product_name: selectedPlanName,
      currency: 'USD',
      order_id: orderId
    });
  }
  
  // Log event to console
  function logEvent(eventName, props) {
    const output = document.getElementById('console-output');
    const eventDiv = document.createElement('div');
    eventDiv.className = 'event';
    
    let propsStr = '';
    if (props) {
      for (const [key, value] of Object.entries(props)) {
        propsStr += `<div class="event-prop">${key}: ${JSON.stringify(value)}</div>`;
      }
    }
    
    eventDiv.innerHTML = `
      <div class="event-name">üéØ ${eventName}</div>
      ${propsStr}
    `;
    
    output.appendChild(eventDiv);
    output.scrollTop = output.scrollHeight;
  }
  
  // Clear console
  function clearConsole() {
    document.getElementById('console-output').innerHTML = `
      <div class="event">
        <div class="event-name">‚ÑπÔ∏è Console cleared</div>
      </div>
    `;
  }
  
  // Initialize
  document.addEventListener('DOMContentLoaded', () => {
    updateTrackedCount();
    
    // Log when PostHog captures events
    if (window.posthog) {
      const originalCapture = window.posthog.capture;
      window.posthog.capture = function(eventName, props) {
        logEvent(eventName, props);
        return originalCapture.apply(this, arguments);
      };
    }
  });
  
  // Update count when DOM changes
  const observer = new MutationObserver(updateTrackedCount);
  observer.observe(document.body, { childList: true, subtree: true });
</script>

</body>
</html>
